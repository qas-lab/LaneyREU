Issue_id,Priority,Component,Duplicated_issue,Title,Description,Status,Resolution,Version,Created_time,Resolved_time,isDuplicate,full_text_data,topic,summary
243,P5,Team,0,2.0 rework: No senders of IRepository.isWritable() (1GJYH82),There are no senders of IRepository.isWritable(); nor of isVersionEnabled().; ; NOTES:,RESOLVED,INVALID,2,##########,##########,0,There are no senders of IRepository.isWritable(); nor of isVersionEnabled().; ; NOTES:2.0 rework: No senders of IRepository.isWritable() (1GJYH82),2,No occurrences of IRepository.isWritable() or isVersionEnabled() found in the codebase.
1533,P2,Debug,0,Feature: notification of changing variables (1G5NRPC),DW (12/8/00 4:03:27 PM); The old VAME debugger displayed variables that changed on the last step ; in a different color. We cannot control color but could use a special ; icon; to present this.; ; JGS (8/8/01 1:55:20 PM); Waiting to hear from VI regarding styling TreeItems.; ; JGS (8/14/01 11:42:53 AM); Example code from VI for bolding items in a tree.; ; public static void main (String [] args) {; final Display display = new Display ();; Shell shell = new Shell (display);; ; final Tree tree = new Tree(shell; SWT.NONE);; tree.setBounds(10; 10; 200; 200);; for (int i = 0; i < 10; i++) {; TreeItem item = new TreeItem(tree; SWT.NONE);; item.setText(item +i);; }; ; final TreeItem treeItem = new TreeItem(tree; SWT.NONE);; treeItem.setText(accented item );; ; final Canvas accent = new Canvas(tree; SWT.NONE);; accent.setBackground(tree.getBackground());; FontData[] data = tree.getFont().getFontData();; data[0].setStyle(SWT.BOLD);; Font font = new Font(display; data[0]);; accent.setFont(font);; accent.addListener(SWT.Paint; new Listener() {; public void handleEvent(Event e) {; e.gc.drawText( treeItem.getText(); 1; 1);; }; });; accent.addListener(SWT.FocusIn; new Listener() {; public void handleEvent(Event e) {; accent.setBackground(display.getSystemColor; (SWT.COLOR_LIST_SELECTION));; accent.setForeground(display.getSystemColor; (SWT.COLOR_LIST_SELECTION_TEXT));; tree.setSelection(new TreeItem[] {treeItem});; }; });; accent.addListener(SWT.FocusOut; new Listener() {; public void handleEvent(Event e) {; accent.setBackground(tree.getBackground());; accent.setForeground(tree.getForeground());; }; });; ; TreeEditor editor = new TreeEditor(tree);; editor.horizontalAlignment = SWT.LEFT;; GC gc = new GC(accent);; editor.minimumWidth = gc.textExtent( treeItem.getText()).x;; gc.dispose();; editor.grabVertical = true;; editor.setEditor(accent; treeItem);; ; shell.open ();; while (!shell.isDisposed ()) {; if (!display.readAndDispatch ()) display.sleep ();; }; font.dispose();; display.dispose ();; }; ; JGS (8/14/01 11:43:22 AM); The trick is to do this enhancement at a language independent level. ; This really; means something like bolding or coloring variable tree items; since ; changing; text or icons is model presentation specific. But since TreeItems ; dont support; any styling options; wed have to extend TreeViewer and do some fairly ; ugly; work to get bolding behavior as outlined above. If we had support for ; styling individual tree items; this could be easier. Filed PR; [1GIGJK4: ITPUI:ALL - Feature request: styled tree items] to track this ; request.; Moving to Inactive.,VERIFIED,FIXED,2,##########,##########,0,DW (12/8/00 4:03:27 PM); The old VAME debugger displayed variables that changed on the last step ; in a different color. We cannot control color but could use a special ; icon; to present this.; ; JGS (8/8/01 1:55:20 PM); Waiting to hear from VI regarding styling TreeItems.; ; JGS (8/14/01 11:42:53 AM); Example code from VI for bolding items in a tree.; ; public static void main (String [] args) {; final Display display = new Display ();; Shell shell = new Shell (display);; ; final Tree tree = new Tree(shell; SWT.NONE);; tree.setBounds(10; 10; 200; 200);; for (int i = 0; i < 10; i++) {; TreeItem item = new TreeItem(tree; SWT.NONE);; item.setText(item +i);; }; ; final TreeItem treeItem = new TreeItem(tree; SWT.NONE);; treeItem.setText(accented item );; ; final Canvas accent = new Canvas(tree; SWT.NONE);; accent.setBackground(tree.getBackground());; FontData[] data = tree.getFont().getFontData();; data[0].setStyle(SWT.BOLD);; Font font = new Font(display; data[0]);; accent.setFont(font);; accent.addListener(SWT.Paint; new Listener() {; public void handleEvent(Event e) {; e.gc.drawText( treeItem.getText(); 1; 1);; }; });; accent.addListener(SWT.FocusIn; new Listener() {; public void handleEvent(Event e) {; accent.setBackground(display.getSystemColor; (SWT.COLOR_LIST_SELECTION));; accent.setForeground(display.getSystemColor; (SWT.COLOR_LIST_SELECTION_TEXT));; tree.setSelection(new TreeItem[] {treeItem});; }; });; accent.addListener(SWT.FocusOut; new Listener() {; public void handleEvent(Event e) {; accent.setBackground(tree.getBackground());; accent.setForeground(tree.getForeground());; }; });; ; TreeEditor editor = new TreeEditor(tree);; editor.horizontalAlignment = SWT.LEFT;; GC gc = new GC(accent);; editor.minimumWidth = gc.textExtent( treeItem.getText()).x;; gc.dispose();; editor.grabVertical = true;; editor.setEditor(accent; treeItem);; ; shell.open ();; while (!shell.isDisposed ()) {; if (!display.readAndDispatch ()) display.sleep ();; }; font.dispose();; display.dispose ();; }; ; JGS (8/14/01 11:43:22 AM); The trick is to do this enhancement at a language independent level. ; This really; means something like bolding or coloring variable tree items; since ; changing; text or icons is model presentation specific. But since TreeItems ; dont support; any styling options; wed have to extend TreeViewer and do some fairly ; ugly; work to get bolding behavior as outlined above. If we had support for ; styling individual tree items; this could be easier. Filed PR; [1GIGJK4: ITPUI:ALL - Feature request: styled tree items] to track this ; request.; Moving to Inactive.Feature: notification of changing variables (1G5NRPC),2,"Request for notification of changing variables through a special icon instead of color, with example code provided for bolding items in a tree. A suggestion is made for enhancing this at a language-independent level, aiming for bolding or coloring variable tree items, filed as a feature request for styled tree items."
1767,P1,SWT,0,Display ASCII for values greater than 127 fails (1GLE8I5),public class Hello() {; ; public static void main(String[] args) {; int x= 255; int y= 67;; System.out.println(Hello; World!);; }; ; }; ; 1. Turn on the Display ASCII values preference.; 2. Place a breakpoint on line 6 (System.out) and debug Hello; 3. Note that xs label is completely empty in the variables view; ; Ive debugged this enough to see that the JDIModelPresentation *is*; generating and returning the correct label for x.; ; NOTES:,RESOLVED,FIXED,2,##########,##########,0,public class Hello() {; ; public static void main(String[] args) {; int x= 255; int y= 67;; System.out.println(Hello; World!);; }; ; }; ; 1. Turn on the Display ASCII values preference.; 2. Place a breakpoint on line 6 (System.out) and debug Hello; 3. Note that xs label is completely empty in the variables view; ; Ive debugged this enough to see that the JDIModelPresentation *is*; generating and returning the correct label for x.; ; NOTES:Display ASCII for values greater than 127 fails (1GLE8I5),2,"Failure of displaying ASCII values for characters greater than 127 in the variables view during debugging, despite correct label generation by JDIModelPresentation."
1781,P3,Scripting,0,Usability: Script editor outline expansion state is lost (1GF60K9),1. Create a script file test.xhtml; 2. Select the form. Add a table to the form with 2 rows.; 3. Select second table row in outline. Add table data. Notice how second table; row expands and new data appears in outline.; 6. Select first table row in outline. Add table data. ; ; Result: The table data appears in the outline. BUT: The tree for the second table ; row collapses. This is extremely annoying. You force the user to redo work which; was previously done just to see an element they created.; ; NOTES:; BF (2001/06/11 13:10:26); Agreed.; Under the covers; a new tree is created within the outline view.; Ideally; each tree items expanded state should be remembered and restored.,RESOLVED,INVALID,2,##########,##########,0,1. Create a script file test.xhtml; 2. Select the form. Add a table to the form with 2 rows.; 3. Select second table row in outline. Add table data. Notice how second table; row expands and new data appears in outline.; 6. Select first table row in outline. Add table data. ; ; Result: The table data appears in the outline. BUT: The tree for the second table ; row collapses. This is extremely annoying. You force the user to redo work which; was previously done just to see an element they created.; ; NOTES:; BF (2001/06/11 13:10:26); Agreed.; Under the covers; a new tree is created within the outline view.; Ideally; each tree items expanded state should be remembered and restored.Usability: Script editor outline expansion state is lost (1GF60K9),2,"Loss of expansion state in the script editor outline when adding table data, forcing users to redo previous work. Proposed solution involves remembering and restoring the expanded state of each tree item within the outline view."
1859,P3,UI,0,Esc does not disable PropertySheet Text Cell Editor. (1G607PZ),Create a File A.usr.; Select a text field on the properties view.; Click on it value to edit it.; Press ESC.; ; The Cell editor is not closed.; ; ; NOTES:; RG (5/4/01 8:47:14 AM); Added listener to listen for editor cancel; PropertySheetViewer 0.103 [rg] 01; ; RG (5/4/01 10:35:06 AM); Not working for combo cell editor; Logged 1GD7J2T: SWT:WINNT - Not getting key events from CCombo; ; RG (5/31/01 6:14:43 PM); May also need; RG (5/31/01 6:08:30 PM); Now waiting on 1GEM261: SWT:ALL - CCombo still has focus when invisible; ; RG (10/2/01 12:39:54 PM); Working with combo cell editor but not color cell editor,RESOLVED,FIXED,2,##########,##########,0,Create a File A.usr.; Select a text field on the properties view.; Click on it value to edit it.; Press ESC.; ; The Cell editor is not closed.; ; ; NOTES:; RG (5/4/01 8:47:14 AM); Added listener to listen for editor cancel; PropertySheetViewer 0.103 [rg] 01; ; RG (5/4/01 10:35:06 AM); Not working for combo cell editor; Logged 1GD7J2T: SWT:WINNT - Not getting key events from CCombo; ; RG (5/31/01 6:14:43 PM); May also need; RG (5/31/01 6:08:30 PM); Now waiting on 1GEM261: SWT:ALL - CCombo still has focus when invisible; ; RG (10/2/01 12:39:54 PM); Working with combo cell editor but not color cell editorEsc does not disable PropertySheet Text Cell Editor. (1G607PZ),2,"ressing ESC after editing a text field in the properties view fails to close the Cell editor as expected. It's noted that a listener was added to handle editor cancellation, but issues persist with combo and color cell editors."
1880,P3,UI,0,Refilter loses expansion state (1G8U2IS),Can we avoid losing the tree expansion state when an item is filtered out; in a TreeViewer? Maybe the tree item could just be set as invisible?; ; NOTES:; ; NE (05/02/01 11:17:43 AM); No support for tree item visibility in SWT.,RESOLVED,WORKSFORME,2,##########,##########,0,Can we avoid losing the tree expansion state when an item is filtered out; in a TreeViewer? Maybe the tree item could just be set as invisible?; ; NOTES:; ; NE (05/02/01 11:17:43 AM); No support for tree item visibility in SWT.Refilter loses expansion state (1G8U2IS),2,Request to prevent loss of tree expansion state when an item is filtered out in a TreeViewer. Noted limitation: SWT lacks support for tree item visibility.
1890,P3,UI,0,Task List View performance problem (1G9VFMK),EG (2/28/01 8:44:40 PM); building a project with many errors (> 1000) takes several minutes; due to the bad task list update performance.; ; This problem is severe; when self hosting you can easily create; a workbench with many errors.; ; NOTES:; ; NE (3/5/01 6:08:45 PM); Problem is that TableViewer updates are O(N); resulting in O(N^2) performance for N marker additions.; Should optimize TableViewer.; ; In the meantime; try changing TaskListContentProvider.processDelta() to:; ; /**; * Process a resource delta. Updates the TaskList viewer with any; * relevant marker changes.; */; protected void processDelta(IResourceDelta delta) {; ; //gather all marker changes from the delta; List additions = new ArrayList();; List removals = new ArrayList();; List changes = new ArrayList();; getMarkerDeltas(delta; additions; removals; changes);; ; //update the viewer based on the marker changes.; if (removals.size() + additions.size() + changes.size() > 0) {; // Just do a complete refresh for now if there are any changes to markers.; fViewer.refresh();; }; }; ; EG (3/6/01 7:38:46 PM); It is only a marginal improvement. Without the patch 35s with the patch 30s.; My test case is to load JavaUI Plugin project into an empty workspace and build.; ; NE (03/06/01 3:14:07 PM); Did some timings on a text resource with 1000 tasks; in VA/Java.; Full refresh took ~25 seconds.; ; getSortedChildren(getRoot): 6025ms; ; For an item at the start; the timings were:; TableViewer.doUpdateItem(widget; element; true): 21.4 ms;  - just getting text and image from label provider; without setText(); getImage() or setImage(): 0.9ms;  - difference: 20.5ms; ; For an item at the end; the timings were:; Table.getColumnCount(): 0.5ms; Table.indexOf(TableItem): 0.5ms; TableItem.setText(column; text): 3.4ms; TableItem.setImage(column; image): 1.9ms; TableViewer.doUpdateItem(widget; element; true): 28.1ms;  - just getting text and image from label provider; without setText(); getImage() or setImage(): 6.9ms;  - difference: 21.2ms; ; The reason getText() and getImage() take longer for the item at the end is that; MarkerManager.findMarkerInfo() is O(N) in the number of markers on a resource.; See 1GA6OQT: ITPCORE:WIN2000 - Marker access performance can be improved; ; But theres still ~20ms per item accounted for just in setting the text and image on the TableItem;; which accounts for ~20 seconds of the above 25; just in talking to SWT.; ; Most performance problems in the task view will have to be addressed by improving incremental; updates in TableViewer; where there is a lot of room for improvement.; However; basic refresh; e.g. when toggling filters; will still take a long time; unless major improvements; are made to SWT. It may not even be possible due to OS widget performance.; ; As an example of what optimizations are possible in SWT; I tried optimizing TableItem.setText(String[]); and using it in doUpdateItem(). It improved the time for doUpdateItem() from 28ms to 17.5ms.; But this is still slow when there are many items.; Even basic redrawing of the Table widget a few seconds when there are this many entries.; ; SN (3/7/01 10:51:50 AM); Here is the code for TableViewer.doUpdateItem ():; ; protected void doUpdateItem(Widget widget; Object element; boolean fullMap) {; if (widget instanceof TableItem) {; TableItem item = (TableItem) widget;; ; // remember element we are showing; if (fullMap) {; associate(element; item);; } else {; item.setData(element);; mapElement(element; item); ; }; ; IBaseLabelProvider prov = getLabelProvider();; ITableLabelProvider tprov = null;; ILabelProvider lprov = null;; if (prov instanceof ITableLabelProvider) {; tprov = (ITableLabelProvider) prov;; }; else {; lprov = (ILabelProvider) prov;; }; int columnCount = table.getColumnCount();; String[] texts = new String[columnCount];;  TableItem ti = (TableItem) item;; for (int column = 0; column < columnCount; column++) {; // Similar code in TableTreeViewer.doUpdateItem(); String text = ;; Image image = null;; if (tprov != null) {; text = tprov.getColumnText(element; column);; image = tprov.getColumnImage(element; column);; }; else {; if (column == 0) {; text = lprov.getText(element);; image = lprov.getImage(element);; }; }; texts[column] = text;; // Apparently a problem to setImage to null if already null; if (image != null || ti.getImage(column) != null) {; ti.setImage(column; image);; }; }; ti.setText(texts);; }; }; ; SN (3/7/01 10:52:28 AM); Here is a benchmark based on the above code:; ; import com.ibm.swt.*;; import com.ibm.swt.widgets.*;; import com.ibm.swt.graphics.*;; import java.io.*;; ; public class PR_1G9VFMK {; ; public static void main(String[] args){; ; /* Set up */; int rows = 1000; columns = 4;; Display display = new Display ();; Shell shell = new Shell();; Table table = new Table(shell; SWT.NULL);; table.setHeaderVisible (true);; table.setBounds (10; 10; 400; 200);; shell.open();; for(int i = 0; i < columns; i++){; TableColumn column = new TableColumn(table; 0);; column.setWidth (64);; }; TableItem [] items = new TableItem [rows];; for(int i = 0; i < rows; i++){; items [i] = new TableItem(table; SWT.NULL);; }; Image image = new Image (display; 16; 16);; GC gc = new GC (image);; gc.setBackground (display.getSystemColor (SWT.COLOR_RED));; gc.fillRectangle (image.getBounds ());; gc.dispose ();; String text = Hello;; ; /* Benchmark */; long start_time = System.currentTimeMillis();; for(int x = 0; x < rows; x++){; Widget widget = items [x];; if (widget instanceof TableItem) {; TableItem item = (TableItem) widget; ; // // remember element we are showing; // if (fullMap) {; // associate(element; item);; // } else {; // item.setData(element);; // mapElement(element; item); ; // }; // ; // IBaseLabelProvider prov = getLabelProvider();; // ITableLabelProvider tprov = null;; // ILabelProvider lprov = null;; // if (prov instanceof ITableLabelProvider) {; // tprov = (ITableLabelProvider) prov;; // }; // else {; // lprov = (ILabelProvider) prov;; // }; int columnCount = table.getColumnCount();; String[] texts = new String[columnCount];; TableItem ti = (TableItem) item;; for (int column = 0; column < columnCount; column++) {; // Similar code in TableTreeViewer.doUpdateItem(); // String text = ;; // Image image = null;; // if (tprov != null) {; // text = tprov.getColumnText(element; column);; // image = tprov.getColumnImage(element; column);; // }; // else {; // if (column == 0) {; // text = lprov.getText(element);; // image = lprov.getImage(element);; // }; // }; texts[column] = text;; // Apparently a problem to setImage to null if already null; if (image != null || ti.getImage(column) != null) {; ti.setImage(column; image);; }; }; ti.setText(texts);; }; } ; long end_time = System.currentTimeMillis();; long elapsed = end_time - start_time;; ; System.out.println(Columns=+columns+ Rows= + rows);; System.out.println(Timed: +elapsed+ms);; while (!shell.isDisposed ()) {; if (!display.readAndDispatch ()) display.sleep ();; }; image.dispose ();; }; }; ; SN (3/7/01 1:57:37 PM); The results on J9; P2-400-128M:; ; Columns=4 Rows=1000; Timed: 2850ms; ; SN (3/7/01 2:49:53 PM); Need to try the above code on VA/Java; ; EJP/SN (3/7/01 3:06:26 PM); Under JDK - P3-300 - 256M; Columns=4 Rows=1000; Timed: 1161ms.; ; Under VAJ (same machine); Columns=4 Rows=1000; Timed: 11927ms; ; EJP (03/07/01 03:29:58 PM); Under VAJ Linux; Columns=4 Rows=1000; Timed: 72075ms; ; KR (3/8/01 4:43:26 PM); Linux; emulated Table on Windows:; J9 - P3-550-256M; Columns=4 Rows=1000; Timed: 16213ms;  on Linux:; Timed: 20702ms; ; Windows; native Table (same setup):; Columns=4 Rows=1000; Timed: 2504ms; ; SWT for Linux is > 20% slower.; Linux Table needs to be 85% faster just to achieve same performance as Windows ; native widget (which apparently is still not good enough).; ; Note: Benchmarks are without JIT; ; KR (3/9/01 4:59:09 PM); Released new SWT code. Performance as follows (without JIT).; J9 - P3-550-256M Windows (emulated Table):; Columns=4 Rows=1000; Timed: 1943ms; ; J9 - P3-550-128M Linux:; Columns=4 Rows=1000; Timed: 2111ms; ; With JIT on Windows (emulated Table):; Columns=4 Rows=1000; Timed: 280ms; ; With JIT on Linux:; Columns=4 Rows=1000; Timed: 640ms,RESOLVED,FIXED,2,##########,##########,0,EG (2/28/01 8:44:40 PM); building a project with many errors (> 1000) takes several minutes; due to the bad task list update performance.; ; This problem is severe; when self hosting you can easily create; a workbench with many errors.; ; NOTES:; ; NE (3/5/01 6:08:45 PM); Problem is that TableViewer updates are O(N); resulting in O(N^2) performance for N marker additions.; Should optimize TableViewer.; ; In the meantime; try changing TaskListContentProvider.processDelta() to:; ; /**; * Process a resource delta. Updates the TaskList viewer with any; * relevant marker changes.; */; protected void processDelta(IResourceDelta delta) {; ; //gather all marker changes from the delta; List additions = new ArrayList();; List removals = new ArrayList();; List changes = new ArrayList();; getMarkerDeltas(delta; additions; removals; changes);; ; //update the viewer based on the marker changes.; if (removals.size() + additions.size() + changes.size() > 0) {; // Just do a complete refresh for now if there are any changes to markers.; fViewer.refresh();; }; }; ; EG (3/6/01 7:38:46 PM); It is only a marginal improvement. Without the patch 35s with the patch 30s.; My test case is to load JavaUI Plugin project into an empty workspace and build.; ; NE (03/06/01 3:14:07 PM); Did some timings on a text resource with 1000 tasks; in VA/Java.; Full refresh took ~25 seconds.; ; getSortedChildren(getRoot): 6025ms; ; For an item at the start; the timings were:; TableViewer.doUpdateItem(widget; element; true): 21.4 ms;  - just getting text and image from label provider; without setText(); getImage() or setImage(): 0.9ms;  - difference: 20.5ms; ; For an item at the end; the timings were:; Table.getColumnCount(): 0.5ms; Table.indexOf(TableItem): 0.5ms; TableItem.setText(column; text): 3.4ms; TableItem.setImage(column; image): 1.9ms; TableViewer.doUpdateItem(widget; element; true): 28.1ms;  - just getting text and image from label provider; without setText(); getImage() or setImage(): 6.9ms;  - difference: 21.2ms; ; The reason getText() and getImage() take longer for the item at the end is that; MarkerManager.findMarkerInfo() is O(N) in the number of markers on a resource.; See 1GA6OQT: ITPCORE:WIN2000 - Marker access performance can be improved; ; But theres still ~20ms per item accounted for just in setting the text and image on the TableItem;; which accounts for ~20 seconds of the above 25; just in talking to SWT.; ; Most performance problems in the task view will have to be addressed by improving incremental; updates in TableViewer; where there is a lot of room for improvement.; However; basic refresh; e.g. when toggling filters; will still take a long time; unless major improvements; are made to SWT. It may not even be possible due to OS widget performance.; ; As an example of what optimizations are possible in SWT; I tried optimizing TableItem.setText(String[]); and using it in doUpdateItem(). It improved the time for doUpdateItem() from 28ms to 17.5ms.; But this is still slow when there are many items.; Even basic redrawing of the Table widget a few seconds when there are this many entries.; ; SN (3/7/01 10:51:50 AM); Here is the code for TableViewer.doUpdateItem ():; ; protected void doUpdateItem(Widget widget; Object element; boolean fullMap) {; if (widget instanceof TableItem) {; TableItem item = (TableItem) widget;; ; // remember element we are showing; if (fullMap) {; associate(element; item);; } else {; item.setData(element);; mapElement(element; item); ; }; ; IBaseLabelProvider prov = getLabelProvider();; ITableLabelProvider tprov = null;; ILabelProvider lprov = null;; if (prov instanceof ITableLabelProvider) {; tprov = (ITableLabelProvider) prov;; }; else {; lprov = (ILabelProvider) prov;; }; int columnCount = table.getColumnCount();; String[] texts = new String[columnCount];;  TableItem ti = (TableItem) item;; for (int column = 0; column < columnCount; column++) {; // Similar code in TableTreeViewer.doUpdateItem(); String text = ;; Image image = null;; if (tprov != null) {; text = tprov.getColumnText(element; column);; image = tprov.getColumnImage(element; column);; }; else {; if (column == 0) {; text = lprov.getText(element);; image = lprov.getImage(element);; }; }; texts[column] = text;; // Apparently a problem to setImage to null if already null; if (image != null || ti.getImage(column) != null) {; ti.setImage(column; image);; }; }; ti.setText(texts);; }; }; ; SN (3/7/01 10:52:28 AM); Here is a benchmark based on the above code:; ; import com.ibm.swt.*;; import com.ibm.swt.widgets.*;; import com.ibm.swt.graphics.*;; import java.io.*;; ; public class PR_1G9VFMK {; ; public static void main(String[] args){; ; /* Set up */; int rows = 1000; columns = 4;; Display display = new Display ();; Shell shell = new Shell();; Table table = new Table(shell; SWT.NULL);; table.setHeaderVisible (true);; table.setBounds (10; 10; 400; 200);; shell.open();; for(int i = 0; i < columns; i++){; TableColumn column = new TableColumn(table; 0);; column.setWidth (64);; }; TableItem [] items = new TableItem [rows];; for(int i = 0; i < rows; i++){; items [i] = new TableItem(table; SWT.NULL);; }; Image image = new Image (display; 16; 16);; GC gc = new GC (image);; gc.setBackground (display.getSystemColor (SWT.COLOR_RED));; gc.fillRectangle (image.getBounds ());; gc.dispose ();; String text = Hello;; ; /* Benchmark */; long start_time = System.currentTimeMillis();; for(int x = 0; x < rows; x++){; Widget widget = items [x];; if (widget instanceof TableItem) {; TableItem item = (TableItem) widget; ; // // remember element we are showing; // if (fullMap) {; // associate(element; item);; // } else {; // item.setData(element);; // mapElement(element; item); ; // }; // ; // IBaseLabelProvider prov = getLabelProvider();; // ITableLabelProvider tprov = null;; // ILabelProvider lprov = null;; // if (prov instanceof ITableLabelProvider) {; // tprov = (ITableLabelProvider) prov;; // }; // else {; // lprov = (ILabelProvider) prov;; // }; int columnCount = table.getColumnCount();; String[] texts = new String[columnCount];; TableItem ti = (TableItem) item;; for (int column = 0; column < columnCount; column++) {; // Similar code in TableTreeViewer.doUpdateItem(); // String text = ;; // Image image = null;; // if (tprov != null) {; // text = tprov.getColumnText(element; column);; // image = tprov.getColumnImage(element; column);; // }; // else {; // if (column == 0) {; // text = lprov.getText(element);; // image = lprov.getImage(element);; // }; // }; texts[column] = text;; // Apparently a problem to setImage to null if already null; if (image != null || ti.getImage(column) != null) {; ti.setImage(column; image);; }; }; ti.setText(texts);; }; } ; long end_time = System.currentTimeMillis();; long elapsed = end_time - start_time;; ; System.out.println(Columns=+columns+ Rows= + rows);; System.out.println(Timed: +elapsed+ms);; while (!shell.isDisposed ()) {; if (!display.readAndDispatch ()) display.sleep ();; }; image.dispose ();; }; }; ; SN (3/7/01 1:57:37 PM); The results on J9; P2-400-128M:; ; Columns=4 Rows=1000; Timed: 2850ms; ; SN (3/7/01 2:49:53 PM); Need to try the above code on VA/Java; ; EJP/SN (3/7/01 3:06:26 PM); Under JDK - P3-300 - 256M; Columns=4 Rows=1000; Timed: 1161ms.; ; Under VAJ (same machine); Columns=4 Rows=1000; Timed: 11927ms; ; EJP (03/07/01 03:29:58 PM); Under VAJ Linux; Columns=4 Rows=1000; Timed: 72075ms; ; KR (3/8/01 4:43:26 PM); Linux; emulated Table on Windows:; J9 - P3-550-256M; Columns=4 Rows=1000; Timed: 16213ms;  on Linux:; Timed: 20702ms; ; Windows; native Table (same setup):; Columns=4 Rows=1000; Timed: 2504ms; ; SWT for Linux is > 20% slower.; Linux Table needs to be 85% faster just to achieve same performance as Windows ; native widget (which apparently is still not good enough).; ; Note: Benchmarks are without JIT; ; KR (3/9/01 4:59:09 PM); Released new SWT code. Performance as follows (without JIT).; J9 - P3-550-256M Windows (emulated Table):; Columns=4 Rows=1000; Timed: 1943ms; ; J9 - P3-550-128M Linux:; Columns=4 Rows=1000; Timed: 2111ms; ; With JIT on Windows (emulated Table):; Columns=4 Rows=1000; Timed: 280ms; ; With JIT on Linux:; Columns=4 Rows=1000; Timed: 640msTask List View performance problem (1G9VFMK),2,"Task List View experiences performance issues when handling projects with many errors, leading to significant delays during updates. Proposed optimizations include improving TableViewer updates and addressing inefficiencies in SWT. Benchmarking reveals varying performance across different environments, with Linux generally exhibiting slower performance compared to Windows."
1896,P4,UI,0,[Workbench] IWorkbenchPart.dispose called at wrong point in time (1GAUFOO),IWorkbenchPart.dispose is called after the widget tree the part stands for as been disposed. Since this method is supposed; to be overriden to free native resources doing so is only possible by remembering all OS resource via fields. You cant write; ; Control control= getControl();; Menu menu= control.getMenu(); <== you get a widget dispose error; ; ; Why isnt the method called before the widgets are disposed ?; ; NOTES:; EG (3/19/01 6:36:24 PM); Isnt this inconsistent with the dispose life cycle in SWT where dispose is called while the widget tree is still alive.; ; DS (4/5/01 2:50:39 PM); WorkbenchPart is not an SWT control. It is a factory for the creation of SWT controls.; If the part is closed the workbench uses the SWT dispose mechanism to dispose of those controls.; Then it calls dispose on the part to signal the end of its lifecycle. I would argue that this is similar; to a JFace viewer. In each case the part / viewer is expected to hook the control dispose and; perform any cleanup at that point as required.; ; In this particular scenario a PR has been logged against SWT. The menu for an SWT control; should be disposed when the control is disposed; automatically.; ; I have updated the javadoc on IWorkbenchPart to clarify this ..; ; * <p>; * After <code>createPartControl</code> has been called; the implementor may ; * safely reference the controls created. When the part is closed ; * these controls will be disposed as part of an SWT composite. A part may define ; * a dispose listener on its own control to free any SWT resources as required. ; * If the part invokes any method on the disposed SWT controls after this point an; * <code>SWTError</code> will be thrown. ; * </p>; * <p>; * The last method called on <code>IWorkbenchPart</code> is <code>dispose</code>. ; * This signals the end of the part lifecycle.; * </p>; ; DB (06.04.2001 09:35:19); As far as I know SWT they cant dispose the menu when the control is disposed since you can share a ; menu between different SWT control (a menu is like a font). Either they must change their menu sharing ; policy or their dispose policy.; ; Since it is not clear to me that they can fix the PR I would like to reopen it again.; ; Moving to Inbox again.; ; DS (4/10/01 10:16:13 AM); In my previous post I said two things:; ; a) SWT will try to address this. There has been no action so far to dispose of the menu; automatically; but they are looking at it.; b) Even if the menu problem is not fixed; you can hook dispose events on the control. ; A dispose event is sent out at the start of the dispose lifecycle .. ; ; class Widget {; public void dispose () {; releaseChild (); // Typically overridden for Composite.; releaseWidget (); // Fires event.; destroyWidget ();; }; void releaseWidget () {; sendEvent (SWT.Dispose);; state |= DISPOSED;; eventTable = null;; data = null;; keys = null;; values = null;; }; }; ; Notice that the event is fired at the start of the lifecycle before the widget has actually; been disposed. According to Kevin H it is acceptable to hook the dispose event and ; clean up any SWT stuff as rrequired; as long as no events are fired as the result of ; your action. ; ; This means you can implement your control using a standard SWT lifecycle and we do not; need to change the part lifecycle.; ; DB (10.04.2001 18:14:17); To clarify my point:; ; If I have to hook listeners for all my internal controls since dispose is called when the widgets I have created are dead anyway ; for what purpose can I use the dispose hook. The only way I can see is to keep references to all resource via fields.; ; I dont agree to close this PR since the purpose of a dispose hook is to clean up SWT resources. And this envolves lot of code; in the current implementation.; ; DS (4/10/01 12:54:13 PM); The control isnt dead. It is only about to be shot; so you can call methods to get the; menu; image; etc; from the control directly.; ; DB (10.04.2001 19:00:30); Which control do you mean? I am talking about the control created in IWorkbenchPart.createPartControl(Composite). And this; one definitly throws a SWT dispose error when you try to access it.; ; DS (4/12/01 12:39:32 PM); I talked with Dirk about this by phone ..; ; a) He was confused by the term dispose. By the name; he felt that the implementation is; expected to dispose of the controls. ; b) We do need a method to signal the end of the part lifecycle.; c) He would prefer to see the introduction of a new method; something like aboutToBeDisposed; or disposePartControl. Right now everybody needs to hook the dispose event and this; is 15 extraneous lines of code for every part.; ; Then I talked with Kevin about this ..; ; a) Yes; it may be confusing.; b) It works as is. Any change would be breaking.; c) We may consider this after June.,RESOLVED,INVALID,2,##########,##########,0,IWorkbenchPart.dispose is called after the widget tree the part stands for as been disposed. Since this method is supposed; to be overriden to free native resources doing so is only possible by remembering all OS resource via fields. You cant write; ; Control control= getControl();; Menu menu= control.getMenu(); <== you get a widget dispose error; ; ; Why isnt the method called before the widgets are disposed ?; ; NOTES:; EG (3/19/01 6:36:24 PM); Isnt this inconsistent with the dispose life cycle in SWT where dispose is called while the widget tree is still alive.; ; DS (4/5/01 2:50:39 PM); WorkbenchPart is not an SWT control. It is a factory for the creation of SWT controls.; If the part is closed the workbench uses the SWT dispose mechanism to dispose of those controls.; Then it calls dispose on the part to signal the end of its lifecycle. I would argue that this is similar; to a JFace viewer. In each case the part / viewer is expected to hook the control dispose and; perform any cleanup at that point as required.; ; In this particular scenario a PR has been logged against SWT. The menu for an SWT control; should be disposed when the control is disposed; automatically.; ; I have updated the javadoc on IWorkbenchPart to clarify this ..; ; * <p>; * After <code>createPartControl</code> has been called; the implementor may ; * safely reference the controls created. When the part is closed ; * these controls will be disposed as part of an SWT composite. A part may define ; * a dispose listener on its own control to free any SWT resources as required. ; * If the part invokes any method on the disposed SWT controls after this point an; * <code>SWTError</code> will be thrown. ; * </p>; * <p>; * The last method called on <code>IWorkbenchPart</code> is <code>dispose</code>. ; * This signals the end of the part lifecycle.; * </p>; ; DB (06.04.2001 09:35:19); As far as I know SWT they cant dispose the menu when the control is disposed since you can share a ; menu between different SWT control (a menu is like a font). Either they must change their menu sharing ; policy or their dispose policy.; ; Since it is not clear to me that they can fix the PR I would like to reopen it again.; ; Moving to Inbox again.; ; DS (4/10/01 10:16:13 AM); In my previous post I said two things:; ; a) SWT will try to address this. There has been no action so far to dispose of the menu; automatically; but they are looking at it.; b) Even if the menu problem is not fixed; you can hook dispose events on the control. ; A dispose event is sent out at the start of the dispose lifecycle .. ; ; class Widget {; public void dispose () {; releaseChild (); // Typically overridden for Composite.; releaseWidget (); // Fires event.; destroyWidget ();; }; void releaseWidget () {; sendEvent (SWT.Dispose);; state |= DISPOSED;; eventTable = null;; data = null;; keys = null;; values = null;; }; }; ; Notice that the event is fired at the start of the lifecycle before the widget has actually; been disposed. According to Kevin H it is acceptable to hook the dispose event and ; clean up any SWT stuff as rrequired; as long as no events are fired as the result of ; your action. ; ; This means you can implement your control using a standard SWT lifecycle and we do not; need to change the part lifecycle.; ; DB (10.04.2001 18:14:17); To clarify my point:; ; If I have to hook listeners for all my internal controls since dispose is called when the widgets I have created are dead anyway ; for what purpose can I use the dispose hook. The only way I can see is to keep references to all resource via fields.; ; I dont agree to close this PR since the purpose of a dispose hook is to clean up SWT resources. And this envolves lot of code; in the current implementation.; ; DS (4/10/01 12:54:13 PM); The control isnt dead. It is only about to be shot; so you can call methods to get the; menu; image; etc; from the control directly.; ; DB (10.04.2001 19:00:30); Which control do you mean? I am talking about the control created in IWorkbenchPart.createPartControl(Composite). And this; one definitly throws a SWT dispose error when you try to access it.; ; DS (4/12/01 12:39:32 PM); I talked with Dirk about this by phone ..; ; a) He was confused by the term dispose. By the name; he felt that the implementation is; expected to dispose of the controls. ; b) We do need a method to signal the end of the part lifecycle.; c) He would prefer to see the introduction of a new method; something like aboutToBeDisposed; or disposePartControl. Right now everybody needs to hook the dispose event and this; is 15 extraneous lines of code for every part.; ; Then I talked with Kevin about this ..; ; a) Yes; it may be confusing.; b) It works as is. Any change would be breaking.; c) We may consider this after June.[Workbench] IWorkbenchPart.dispose called at wrong point in time (1GAUFOO),2,"The timing of IWorkbenchPart.dispose() is questioned, as it occurs after the associated widget tree has been disposed. This inconsistency with SWT's disposal lifecycle prompts concerns about resource management and the necessity of manually handling native resources. Discussions explore potential solutions, including automatic disposal of controls and introducing new methods to signal the end of the part lifecycle."
1899,P3,UI,0,DCR: Wants celleditors on TreeViewer (1GBCUPD),Wants a TreeEditor to add CellEditors on a Tree; ; NOTES:; ; Wants to have the ability to add celleditors to the node of a Tree; the same way you add cell editors; to the columns of a table.; The sceanrio is the same as the Windows Explorer; in the tree viewer; you can right click on an; element and rename it; which will open a cell editor; ; CE (3/29/01 11:06:26 AM); SWT fix : 1G7HNM6: ITPUI:ALL - DCR:Wants CellEditors on Tree,RESOLVED,WONTFIX,2,##########,##########,0,Wants a TreeEditor to add CellEditors on a Tree; ; NOTES:; ; Wants to have the ability to add celleditors to the node of a Tree; the same way you add cell editors; to the columns of a table.; The sceanrio is the same as the Windows Explorer; in the tree viewer; you can right click on an; element and rename it; which will open a cell editor; ; CE (3/29/01 11:06:26 AM); SWT fix : 1G7HNM6: ITPUI:ALL - DCR:Wants CellEditors on TreeDCR: Wants celleditors on TreeViewer (1GBCUPD),2,"Requesting the addition of CellEditors to the nodes of a TreeViewer, similar to adding them to columns in a table. This feature would allow users to rename elements by right-clicking and opening a cell editor, akin to the behavior in Windows Explorer."
1938,P3,UI,0,[JFace] ICellModifier.modify() is passed Item; not element (1GCQZOM),The modify(...) method on ICellModifier is passed the Item widget; not the element object.; This is contrary to how it is speced.; ; See also: 1G7CG5V: ITPUI:ALL - API : What object should an ICellModifier receive; ; ; NOTES:; ; KH (8/13/2001 2:03:38 PM); No breaking API changes.,RESOLVED,FIXED,2,##########,##########,0,The modify(...) method on ICellModifier is passed the Item widget; not the element object.; This is contrary to how it is speced.; ; See also: 1G7CG5V: ITPUI:ALL - API : What object should an ICellModifier receive; ; ; NOTES:; ; KH (8/13/2001 2:03:38 PM); No breaking API changes.[JFace] ICellModifier.modify() is passed Item; not element (1GCQZOM),2,"The modify(...) method of ICellModifier receives the Item widget instead of the element object, contrary to the specification. This discrepancy prompts clarification regarding the expected object passed to ICellModifier. No breaking API changes are anticipated."
1988,P3,UI,0,[UI] ESC closes the Navigator. (1GD5XD8),Move the Navigator to a new detached window.; Select a file.; Press ESC.; ; The window closes but nothing should happen. ; ; NOTES:; ; NE (05/22/01 4:11:18 PM); On ESC; SWT gets an WM_KEYFIRST message; which gets processed by Display.translateTraversal;; which ends up calling traverseEscape() on the focus control (the navigators Tree in this case).; Its default behaviour is to close the controls shell; unless the shell has no parent.; ; Cant hook a traversal listener since we the focus control is arbitrary.; ; Could create it without a parent in DetachedWindows constructor; but then the detached window; would act as a separate window; not a child of the workbench window.; E.g. it would not minimize when the workbench window is minimized.; ; NE (5/24/01 2:24:56 PM); Filed 1GE8RXW: SWT:WIN98 - Need a way for child shells to disable ESC closing; This would be a good candidate for an SWT patch.,RESOLVED,WONTFIX,2,##########,##########,0,Move the Navigator to a new detached window.; Select a file.; Press ESC.; ; The window closes but nothing should happen. ; ; NOTES:; ; NE (05/22/01 4:11:18 PM); On ESC; SWT gets an WM_KEYFIRST message; which gets processed by Display.translateTraversal;; which ends up calling traverseEscape() on the focus control (the navigators Tree in this case).; Its default behaviour is to close the controls shell; unless the shell has no parent.; ; Cant hook a traversal listener since we the focus control is arbitrary.; ; Could create it without a parent in DetachedWindows constructor; but then the detached window; would act as a separate window; not a child of the workbench window.; E.g. it would not minimize when the workbench window is minimized.; ; NE (5/24/01 2:24:56 PM); Filed 1GE8RXW: SWT:WIN98 - Need a way for child shells to disable ESC closing; This would be a good candidate for an SWT patch.[UI] ESC closes the Navigator. (1GD5XD8),2,"When the Navigator is moved to a new detached window and a file is selected, pressing ESC closes the window, which should not occur. ESC triggers the traverseEscape() method on the focus control (the Navigator's Tree), leading to the default behavior of closing the shell. Proposed solutions include finding a way for child shells to disable ESC closing and considering modifications to the Navigator's behavior."
2155,P3,UI,0,[JFace] Project Reference preference page wraps info too soon (1GE8MLW),The label in the ProjectReferences page wraps too soon - it ends up on 3 lines and would be better; on fewer. This is because the widget does not fill horizontal.; ; ; NOTES:; EJP (07/12/01 04:04:43 PM); createControl() in PreferencePage sets the layout data after calling createDescriptionLabel; descriptionLabel= createDescriptionLabel(content);; if (descriptionLabel != null) {; descriptionLabel.setLayoutData(new GridData(GridData.FILL_HORIZONTAL));; }; createControl() in ProjectPreferencePage does not do it.,RESOLVED,FIXED,2,##########,##########,0,The label in the ProjectReferences page wraps too soon - it ends up on 3 lines and would be better; on fewer. This is because the widget does not fill horizontal.; ; ; NOTES:; EJP (07/12/01 04:04:43 PM); createControl() in PreferencePage sets the layout data after calling createDescriptionLabel; descriptionLabel= createDescriptionLabel(content);; if (descriptionLabel != null) {; descriptionLabel.setLayoutData(new GridData(GridData.FILL_HORIZONTAL));; }; createControl() in ProjectPreferencePage does not do it.[JFace] Project Reference preference page wraps info too soon (1GE8MLW),2,"The label in the ProjectReferences page wraps prematurely, resulting in three lines instead of fewer, as the widget fails to fill horizontally. This issue stems from a discrepancy in the createControl() method implementation between PreferencePage and ProjectPreferencePage. [JFace] Project Reference preference page wraps information too soon."
2277,P3,UI,0,API diff between CoreException & WorkbenchException (1GEJK3L),WorkbenchException inherits from CoreException. CoreException has a method; getStatus() that; according to the doc; will always return some type of IStatus object; (i.e it will not be null).; ; This is not the case with WorkbenchException and PartInitException - they do not; always have a status object.; ; NOTES:,RESOLVED,INVALID,2,##########,##########,0,WorkbenchException inherits from CoreException. CoreException has a method; getStatus() that; according to the doc; will always return some type of IStatus object; (i.e it will not be null).; ; This is not the case with WorkbenchException and PartInitException - they do not; always have a status object.; ; NOTES:API diff between CoreException & WorkbenchException (1GEJK3L),2,"WorkbenchException, which inherits from CoreException, lacks consistency with CoreException's getStatus() method, which always returns an IStatus object according to documentation. However, WorkbenchException and PartInitException don't consistently return a status object. [API diff between CoreException & WorkbenchException]"
2348,P3,UI,0,NPE: Cannot open examples view (1GET9OT),There is a null pointer exception trying to open the examples view; org.eclipse.jface.examples.common.ExamplesView.getExamples(); could do something like; ; // obtain file; URL baseURL = JFaceExamplesPlugin.getDefault().getDescriptor().getInstallURL();; URL fileURL= null;; try {; fileURL = new URL(baseURL; EXAMPLES_FILE);//$NON-NLS-1$; } catch (MalformedURLException e) {; // handle the exception; }; ; ; NOTES:,RESOLVED,INVALID,2,##########,##########,0,There is a null pointer exception trying to open the examples view; org.eclipse.jface.examples.common.ExamplesView.getExamples(); could do something like; ; // obtain file; URL baseURL = JFaceExamplesPlugin.getDefault().getDescriptor().getInstallURL();; URL fileURL= null;; try {; fileURL = new URL(baseURL; EXAMPLES_FILE);//$NON-NLS-1$; } catch (MalformedURLException e) {; // handle the exception; }; ; ; NOTES:NPE: Cannot open examples view (1GET9OT),2,"Opening the examples view triggers a null pointer exception, likely originating from org.eclipse.jface.examples.common.ExamplesView.getExamples(). Suggested fix involves obtaining a file URL using JFaceExamplesPlugin. [NPE: Cannot open examples view]"
2389,P2,UI,0,[MPE] Take out workaround in MultiPageEditorPart.pageChange(int) (1GEV94I),Can take out the workaround for ; 1GCN531: SWT:WIN2000 - CTabFolder childs visibility is false on notification; in MultiPageEditorPart.pageChange(int).; ; Should also check if workaround for; 1GAUS7C: ITPUI:ALL - Editor not activated when restored from previous session; can be removed.; ; NOTES:,VERIFIED,FIXED,2,##########,##########,0,Can take out the workaround for ; 1GCN531: SWT:WIN2000 - CTabFolder childs visibility is false on notification; in MultiPageEditorPart.pageChange(int).; ; Should also check if workaround for; 1GAUS7C: ITPUI:ALL - Editor not activated when restored from previous session; can be removed.; ; NOTES:[MPE] Take out workaround in MultiPageEditorPart.pageChange(int) (1GEV94I),2,"the removal of a workaround in MultiPageEditorPart.pageChange(int) concerning SWT CTabFolder child's visibility. Additionally, it suggests evaluating whether another workaround for ITPUI Editor not activated when restored from the previous session can be eliminated."
2498,P3,UI,0,TextCellEditor.isSelectAllEnabled() is expensive (1GFBITI),TextCellEditor.isSelectAllEnabled() does text.getText().length.; This is expensive.; Its common to have Select All enabled even when the widget is empty.; Compare with Notepad and Windows Explorer.; ; Should change it to just return true.; ; NOTES:,RESOLVED,FIXED,2,##########,##########,0,TextCellEditor.isSelectAllEnabled() does text.getText().length.; This is expensive.; Its common to have Select All enabled even when the widget is empty.; Compare with Notepad and Windows Explorer.; ; Should change it to just return true.; ; NOTES:TextCellEditor.isSelectAllEnabled() is expensive (1GFBITI),2,"optimizing TextCellEditor.isSelectAllEnabled() by changing it to return true directly, considering that the current implementation, which calculates text.getText().length(), is resource-intensive."
2574,P4,UI,0,[Cell Editors] CellEditor activation is not flexible enough (1GGEBXN),AK writes on EC:; ; i have a multi state cell editor (exactly like CheckBoxCellEditor - it; just has n states; not 2); ; on each click the state changes. however; double clicks are ignored; ; which is not what i want.; ; also; there seems to be a timeout on the single click. how do i turn it; off?; ; to summ up; heres the behavior id like to have:; .you single click and the value changes imediately - like in a checkbox; table (see jre preference page); .double click does exactly what single click does; ; alternatively; single click is disabled; double click does the job; ; how do i get that bahavior?; thanks; ; ; NOTES:; ; NE (7/5/01 11:01:26 AM); EC reply:; ; Unfortunately the TableViewer (and TableTreeViewer) hardcodes the delay and; the double-click (non-)behaviour; in the TableViewerImpl class. See; TableViewerImpl.handleMouseDown(MouseEvent) and; handleMouseDoubleClick(MouseEvent).; These are called by the listener in TableViewer.hookControl().; ; You might be able to fake it out by hooking selection or mouse events on the; Table widget; and calling TableViewer.editElement(Object element; int; column). Youll need to determine which column was selected by checking; bounds of the various columns in the; selected item. See TableViewerImpl.activateCellEditor(MouseEvent) for how; it normally does this.; You can get the element from the TableItem using getData() (although this is; an internal implementation detail).; However; if you do hook these events; the TableViewerImpl will still be; doing its own handling; so you may have some strange interactions with the; default behaviour.; ; The only other alternative currently is to not set the cell editors in the; viewer; but handle editing yourself (create your own TableEditor).; You could still use the cell editors; but you would have control over when; they are activated; rather than TableViewerImpl.; This is a bit more work; but would give you the most control.,RESOLVED,FIXED,2,##########,##########,0,AK writes on EC:; ; i have a multi state cell editor (exactly like CheckBoxCellEditor - it; just has n states; not 2); ; on each click the state changes. however; double clicks are ignored; ; which is not what i want.; ; also; there seems to be a timeout on the single click. how do i turn it; off?; ; to summ up; heres the behavior id like to have:; .you single click and the value changes imediately - like in a checkbox; table (see jre preference page); .double click does exactly what single click does; ; alternatively; single click is disabled; double click does the job; ; how do i get that bahavior?; thanks; ; ; NOTES:; ; NE (7/5/01 11:01:26 AM); EC reply:; ; Unfortunately the TableViewer (and TableTreeViewer) hardcodes the delay and; the double-click (non-)behaviour; in the TableViewerImpl class. See; TableViewerImpl.handleMouseDown(MouseEvent) and; handleMouseDoubleClick(MouseEvent).; These are called by the listener in TableViewer.hookControl().; ; You might be able to fake it out by hooking selection or mouse events on the; Table widget; and calling TableViewer.editElement(Object element; int; column). Youll need to determine which column was selected by checking; bounds of the various columns in the; selected item. See TableViewerImpl.activateCellEditor(MouseEvent) for how; it normally does this.; You can get the element from the TableItem using getData() (although this is; an internal implementation detail).; However; if you do hook these events; the TableViewerImpl will still be; doing its own handling; so you may have some strange interactions with the; default behaviour.; ; The only other alternative currently is to not set the cell editors in the; viewer; but handle editing yourself (create your own TableEditor).; You could still use the cell editors; but you would have control over when; they are activated; rather than TableViewerImpl.; This is a bit more work; but would give you the most control.[Cell Editors] CellEditor activation is not flexible enough (1GGEBXN),2,"The user AK requests assistance with a custom multi-state cell editor that behaves differently from a standard CheckBoxCellEditor. They seek immediate value change upon single-click, akin to checkbox behavior, and want double-clicks to perform the same action as single-clicks. They inquire about disabling single-click functionality and achieving desired behavior. In response, NE explains the hardcoded behavior in TableViewerImpl class, suggesting potential workarounds by hooking selection or mouse events on the Table widget or creating a custom TableEditor. NE highlights the complexities involved and recommends handling editing independently."
2579,P3,UI,0,DCR: Perspective title should indicate its contents (1GGN90H),1. Setup open perspective to open a new window; 2. Setup new type hierarchy to be inside the Hierarchy perspective; 3. Open hierarchy on type java.lang.String; 4. Minimize window; 5. Open hierarchy on type java.util.Vector; 6. Mininmize window; Observe: You cannot tell the diffence between the 2 iconified window: they both say:; Java Type Hierarchy - Eclipse Project SDK; ; I would expect them to say:; - java.lang.String; - java.util.Vector; ; NOTES:; EG (7/11/01 11:39:53 AM); The window title is managed by the workbench. For perspective with an input; the input should be shown in the title.; Changed the PR into a DCR and moved to ITPUI; ; EJP (7/31/01 12:49:18 PM); Here is a fix:; Change the method WorkbenchWindow>>#updateTitle to:; ; private void updateTitle() {; String title = workbench.getProductInfo().getName();; if (activePage != null) {; IPerspectiveDescriptor persp = activePage.getPerspective();; String label = persp.getLabel();; IAdaptable input = activePage.getInput();; if((input != null) && (activePage.getInput() != ResourcesPlugin.getWorkspace().getRoot())); label = activePage.getLabel();; title = WorkbenchMessages.format(WorkbenchWindow.shellTitle; new Object[] {label; title}); //$NON-NLS-1$; }; getShell().setText(title); ; },RESOLVED,FIXED,2,##########,##########,0,1. Setup open perspective to open a new window; 2. Setup new type hierarchy to be inside the Hierarchy perspective; 3. Open hierarchy on type java.lang.String; 4. Minimize window; 5. Open hierarchy on type java.util.Vector; 6. Mininmize window; Observe: You cannot tell the diffence between the 2 iconified window: they both say:; Java Type Hierarchy - Eclipse Project SDK; ; I would expect them to say:; - java.lang.String; - java.util.Vector; ; NOTES:; EG (7/11/01 11:39:53 AM); The window title is managed by the workbench. For perspective with an input; the input should be shown in the title.; Changed the PR into a DCR and moved to ITPUI; ; EJP (7/31/01 12:49:18 PM); Here is a fix:; Change the method WorkbenchWindow>>#updateTitle to:; ; private void updateTitle() {; String title = workbench.getProductInfo().getName();; if (activePage != null) {; IPerspectiveDescriptor persp = activePage.getPerspective();; String label = persp.getLabel();; IAdaptable input = activePage.getInput();; if((input != null) && (activePage.getInput() != ResourcesPlugin.getWorkspace().getRoot())); label = activePage.getLabel();; title = WorkbenchMessages.format(WorkbenchWindow.shellTitle; new Object[] {label; title}); //$NON-NLS-1$; }; getShell().setText(title); ; }DCR: Perspective title should indicate its contents (1GGN90H),2,"steps to reproduce an issue where iconified windows in the Hierarchy perspective display the same title, making it difficult to distinguish between them. The expected behavior is for each window to display the name of the type hierarchy being viewed. EG suggests that window titles should reflect their contents and proposes a fix by updating the WorkbenchWindow method. EJP provides a fix by suggesting changes to the updateTitle method in WorkbenchWindow."
2581,P3,UI,0,Perspective layout modifications are too easy to perform by mistake (1GGNLJH),When manipulating the IDE; I often end up moving a view around by mistake; and have no undo functionality. Would it be envisageable; to have this functionality ? I end up having to reset the perspective alltogether; loosing all customizations at once (and therefore; discouraging to perform any).; ; NOTES:; EJP (7/31/01 2:47:47 PM); We could fix CTabPartDragDrop>>#mouseDown to avoid dragging from the CTabFolder borders.; Making it more dificulty to move views by mistake.; ; EJP (7/31/01 2:50:21 PM); Here is a changed version of mouseDown:; ; public void mouseDown(MouseEvent e) {; if (e.button != 1) return;; ; // Verify that the tab under the mouse pointer; // is the same as for this drag operation; CTabFolder tabFolder = getCTabFolder();; CTabItem tabUnderPointer = tabFolder.getItem(new Point(e.x; e.y));; if (tabUnderPointer != tab); return;; if(tabUnderPointer == null) {; //Avoid drag from the borders.; Rectangle clientArea = tabFolder.getClientArea();; if((tabFolder.getStyle() & SWT.TOP) != 0) {; if(e.y > clientArea.y); return;; } else {; if(e.y < clientArea.y + clientArea.height); return;; }; }; ; super.mouseDown(e);; },RESOLVED,FIXED,2,##########,##########,0,When manipulating the IDE; I often end up moving a view around by mistake; and have no undo functionality. Would it be envisageable; to have this functionality ? I end up having to reset the perspective alltogether; loosing all customizations at once (and therefore; discouraging to perform any).; ; NOTES:; EJP (7/31/01 2:47:47 PM); We could fix CTabPartDragDrop>>#mouseDown to avoid dragging from the CTabFolder borders.; Making it more dificulty to move views by mistake.; ; EJP (7/31/01 2:50:21 PM); Here is a changed version of mouseDown:; ; public void mouseDown(MouseEvent e) {; if (e.button != 1) return;; ; // Verify that the tab under the mouse pointer; // is the same as for this drag operation; CTabFolder tabFolder = getCTabFolder();; CTabItem tabUnderPointer = tabFolder.getItem(new Point(e.x; e.y));; if (tabUnderPointer != tab); return;; if(tabUnderPointer == null) {; //Avoid drag from the borders.; Rectangle clientArea = tabFolder.getClientArea();; if((tabFolder.getStyle() & SWT.TOP) != 0) {; if(e.y > clientArea.y); return;; } else {; if(e.y < clientArea.y + clientArea.height); return;; }; }; ; super.mouseDown(e);; }Perspective layout modifications are too easy to perform by mistake (1GGNLJH),2,"highlights the need for undo functionality when unintentionally moving views in the IDE, which currently results in the loss of customizations. EJP suggests modifying the CTabPartDragDrop class to make it harder to drag views accidentally, offering an altered version of the mouseDown method for this purpose."
4570,P4,SWT,6172,Unable to save ImageData to byte stream (1G3HYYA),When I run the following code; I get the error:; ; com.ibm.swt.SWTError: Invalid image; ; at com.ibm.swt.image.FileFormat.error(FileFormat.java:25); at com.ibm.swt.image.WinBMPFileFormat.unloadIntoByteStream(WinBMPFileFormat.java:573); at com.ibm.swt.image.FileFormat.unloadIntoStream(FileFormat.java:101); at com.ibm.swt.image.ImageData.save(ImageData.java:739); at default.PR_1G3HYYA.main(img.java; Compiled Code); ; Exception in thread main ; ; This used to work. It works in Linux.; ; import com.ibm.swt.*;; import com.ibm.swt.image.*;; import com.ibm.swt.graphics.*;; import com.ibm.swt.widgets.*;; import java.io.*;; ; public class PR_1G3HYYA {; ; public static void main(String[] args) {; Shell shell = new Shell();; ; Image image = new Image(shell.getDisplay(); 100; 100);; GC gc = new GC(image);; Color oldCol = gc.getForeground();; ; for (int x = 0; x < 100; x+=5) {; for (int y = 0; y < 100; y+=5) {; Color color = new Color(shell.getDisplay(); Math.round(x * 2.5f); Math.round(y * 2.5f); 128);; gc.setForeground(color);; ; gc.drawLine(x; y; x + 5; y);; gc.drawLine(x; y+1; x + 5; y+1);; gc.drawLine(x; y+2; x + 5; y+2);; gc.drawLine(x; y+3; x + 5; y+3);; gc.drawLine(x; y+4; x + 5; y+4);; ; gc.setForeground(oldCol);; color.dispose();; }; }; ; gc.drawString(CANVAS; 0; 0; true);; ; gc.dispose();; ; ImageData imdata = image.getImageData();; ByteArrayOutputStream out = new ByteArrayOutputStream();; DataOutputStream writeOut = new DataOutputStream(out);; imdata.save(writeOut; SWT.IMAGE_BMP);; ; image.dispose();; shell.dispose();; }; ; }; ; NOTES:; CM (12/13/00 3:46:28 PM); Hmmm... looks like the imageData has an unsupported depth of 32 for BMP files.; The interesting question is how did this work before? We have never supported; 32 bit depth BMPs. Somehow; the imageData was created with depth 32.; Was the code run on a different display?; ; SN (2/5/01 2:53:40 PM); CAR to investigate.,RESOLVED,DUPLICATE,2,##########,##########,1,When I run the following code; I get the error:; ; com.ibm.swt.SWTError: Invalid image; ; at com.ibm.swt.image.FileFormat.error(FileFormat.java:25); at com.ibm.swt.image.WinBMPFileFormat.unloadIntoByteStream(WinBMPFileFormat.java:573); at com.ibm.swt.image.FileFormat.unloadIntoStream(FileFormat.java:101); at com.ibm.swt.image.ImageData.save(ImageData.java:739); at default.PR_1G3HYYA.main(img.java; Compiled Code); ; Exception in thread main ; ; This used to work. It works in Linux.; ; import com.ibm.swt.*;; import com.ibm.swt.image.*;; import com.ibm.swt.graphics.*;; import com.ibm.swt.widgets.*;; import java.io.*;; ; public class PR_1G3HYYA {; ; public static void main(String[] args) {; Shell shell = new Shell();; ; Image image = new Image(shell.getDisplay(); 100; 100);; GC gc = new GC(image);; Color oldCol = gc.getForeground();; ; for (int x = 0; x < 100; x+=5) {; for (int y = 0; y < 100; y+=5) {; Color color = new Color(shell.getDisplay(); Math.round(x * 2.5f); Math.round(y * 2.5f); 128);; gc.setForeground(color);; ; gc.drawLine(x; y; x + 5; y);; gc.drawLine(x; y+1; x + 5; y+1);; gc.drawLine(x; y+2; x + 5; y+2);; gc.drawLine(x; y+3; x + 5; y+3);; gc.drawLine(x; y+4; x + 5; y+4);; ; gc.setForeground(oldCol);; color.dispose();; }; }; ; gc.drawString(CANVAS; 0; 0; true);; ; gc.dispose();; ; ImageData imdata = image.getImageData();; ByteArrayOutputStream out = new ByteArrayOutputStream();; DataOutputStream writeOut = new DataOutputStream(out);; imdata.save(writeOut; SWT.IMAGE_BMP);; ; image.dispose();; shell.dispose();; }; ; }; ; NOTES:; CM (12/13/00 3:46:28 PM); Hmmm... looks like the imageData has an unsupported depth of 32 for BMP files.; The interesting question is how did this work before? We have never supported; 32 bit depth BMPs. Somehow; the imageData was created with depth 32.; Was the code run on a different display?; ; SN (2/5/01 2:53:40 PM); CAR to investigate.Unable to save ImageData to byte stream (1G3HYYA),2,"The code snippet triggers an error when run, specifically a ""com.ibm.swt.SWTError: Invalid image."" Notably, it used to function correctly and still does on Linux. The report examines the code's attempt to save an image and suggests that the problem may stem from an unsupported depth of 32 for BMP files. Further investigation is required to understand how the code previously operated despite this limitation."
6172,P3,SWT,294986,ImageLoader saves IMAGE_BMP with incorrect colours,The bitmap saved by the following code has incorrect colouring. The light grey ; widget colour becomes to be a nice shade of violet.; ; --; import org.eclipse.swt.graphics.*;; import org.eclipse.swt.widgets.*;; import org.eclipse.swt.*;; ; public class ScreenshotTest {; public static void main(String[] argv) {; Display display = new Display();; Image image = new Image(display; 200; 200);; GC gc = new GC(display);; gc.copyArea(image; 0; 0);; ImageLoader loader = new ImageLoader();; loader.data = new ImageData[] { image.getImageData() };; loader.save(foo.bmp; SWT.IMAGE_BMP);; gc.dispose();; image.dispose();; }; },CLOSED,DUPLICATE,2,##########,##########,1,The bitmap saved by the following code has incorrect colouring. The light grey ; widget colour becomes to be a nice shade of violet.; ; --; import org.eclipse.swt.graphics.*;; import org.eclipse.swt.widgets.*;; import org.eclipse.swt.*;; ; public class ScreenshotTest {; public static void main(String[] argv) {; Display display = new Display();; Image image = new Image(display; 200; 200);; GC gc = new GC(display);; gc.copyArea(image; 0; 0);; ImageLoader loader = new ImageLoader();; loader.data = new ImageData[] { image.getImageData() };; loader.save(foo.bmp; SWT.IMAGE_BMP);; gc.dispose();; image.dispose();; }; }ImageLoader saves IMAGE_BMP with incorrect colours,2,"The provided code saves a bitmap image with incorrect coloring. Notably, the light grey widget color appears as a violet shade. This discrepancy occurs when using the ImageLoader to save the image as IMAGE_BMP."